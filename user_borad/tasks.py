
from django.core.mail import send_mail

from celery import shared_task

#发送邮件验证码，使用task进行异步处理
@shared_task
def send_email(request):
    import random
    str1 = '0123456789'
    rand_str = ''
    for i in range(0, 6):
        rand_str += str1[random.randrange(0, len(str1))]

    send_mail(
        subject='Avnext验证码',
        message='你的验证码为:'+ rand_str +'请不要将你的验证码告诉其他人',
        from_email='watch.dog@qq.com',
        recipient_list=[request],
        fail_silently=False
    )
    x = "发送邮件完成"
    return request(request,"TEST",x)

